<!doctype html><html lang="en"><head><meta charset="UTF-8"><meta name="darkreader-lock"><meta name="viewport" content="width=device-width,initial-scale=1"><title>Violette • 4.2 #define</title><link rel="shortcut icon" href="/assets/images/pecklo.webp" type="image/x-icon"><link rel="stylesheet" href="/assets/css/main.min.css"><script type="module" src="/assets/js/main.js" defer="defer"></script></head><body><div id="sidebar"><nav><section id="about"><img width="296" height="296" src="/assets/images/peklo-transparent.png" alt=""> <a id="" href="/">Violette</a></section><section id="links"><a href="/awesome/">Awesome</a> • <a href="/blogs/">Blogs</a> • <a href="/">Home</a> • <a href="/projects/">Projects</a> • <a target="_blank" rel="noopener noreferrer" href="https://github.com/imsumire/">Github</a> • <a target="_blank" rel="noopener noreferrer" href="https://www.pinterest.fr/Violettttte/">Pinterest</a></section></nav><footer><p>Made with ❤ by <a target="_blank" rel="noopener noreferrer" href="https://github.com/ImSumire">@imsumire</a></p><p>Using <a target="_blank" rel="noopener noreferrer" href="https://www.11ty.dev/">11ty</a>, <a target="_blank" rel="noopener noreferrer" href="https://swup.js.org/">Swup</a>, <a target="_blank" rel="noopener noreferrer" href="https://sass-lang.com/">Sass</a> and <a target="_blank" rel="noopener noreferrer" href="https://www.typescriptlang.org/">TypeScript</a></p></footer></div><main class="transition-main"><h1>4.2 #define</h1><p>La macro <code>#define</code> permet de définir (et oui!) du texte à remplacer pendant la compilation, comme avec <code>#include</code> mais ici c'est un simple texte:</p><pre class="language-c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">include</span> <span class="token string">&lt;stdio.h></span></span>

<span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name">PI</span> <span class="token expression"><span class="token number">3.14159</span></span></span>

<span class="token keyword">int</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"π = %f"</span><span class="token punctuation">,</span> PI<span class="token punctuation">)</span><span class="token punctuation">;</span>

    <span class="token keyword">return</span> <span class="token number">0</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span></code></pre><section class="accordion"><input type="checkbox" checked="checked"><h4>Attention!<i></i></h4><article><p>Ici <code>PI</code> n'est pas une variable, c'est seulement du texte, la ligne se transformera en:</p><pre class="language-c"><code class="language-c"><span class="token function">printf</span><span class="token punctuation">(</span><span class="token string">"π = %f"</span><span class="token punctuation">,</span> <span class="token number">3.14159</span><span class="token punctuation">)</span><span class="token punctuation">;</span></code></pre></article></section><p>Nous pouvons aussi ajouter des arguments et même des expressions:</p><pre class="language-c"><code class="language-c"><span class="token macro property"><span class="token directive-hash">#</span><span class="token directive keyword">define</span> <span class="token macro-name function">MAX</span><span class="token expression"><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> a <span class="token operator">></span> b <span class="token operator">?</span> a <span class="token operator">:</span> b</span></span></code></pre><p><em>Ici <code>MAX(1, 2)</code> sera remplacé par <code>1 &gt; 2 ? 1 : 2</code> (donc <code>2</code>).</em><br><em>Cela permet d'avoir une sorte de fonction sans type, donc utilisable avec des <code>int</code> et <code>float</code>.</em></p><section class="accordion"><input type="checkbox" checked="checked"><h4>Attention!<i></i></h4><article><p>C étant un langage assez vieux, les messages d'erreur ne sont pas minimalistes, donc vous pourrez très vite avoir ce genre de message:</p><pre><code>
main.c: In function ‘main’:
main.c:1:21: <span class="token deleted">error</span>: invalid operands to binary > (have ‘Human’ and ‘Human’)
    1 | #define MAX(a, b) a <span class="token deleted">></span> b ? a : b
      |                     <span class="token deleted">^</span>
main.c:11:23: <span class="token entity">note</span>: in expansion of macro ‘MAX’
   11 |     Human greatest = <span class="token entity">MAX</span>(bob, jakeulineu);
      |                      <span class="token entity">^~~</span>
</code></pre><p><em>Certes, ici ce n'est pas si horrible que ça car il n'y a qu'une seule erreur dans une seule macro, mais ça peut très vite être un bazar.</em> (l'erreur ici c'est que l'opérateur <code>&gt;</code> n'est pas compatible avec <code>Human</code> et <code>Human</code>)</p></article></section><section class="accordion" optional><input type="checkbox" checked="checked"><h4>Notes<i></i></h4><article><p>Il y a d'autres macros, comme celles appelées &quot;pragma&quot; ou encore celles qui permettent d'avoir des conditions avec <code>#IF</code> et <code>#ELSE</code>; mais nous n'allons pas les utiliser.</p><p><em>Si l'Université de Poitiers les intègre dans leur cours, je le ferai aussi pour y être conforme.</em></p></article></section><p>Source: <a href="https://fr.wikipedia.org/wiki/Pr%C3%A9processeur_C" target="_blank" rel="noopener noreferrer">Wikipedia</a></p><a href="/blog/c-fr/include"><button class="prevlink">4.1 #include</button></a> <a href="/blog/c-fr/io"><button class="nextlink">5.0 I/O</button></a></main></body></html>